<!DOCTYPE html>
<div class="container">
    <div class="row">	    	
      	<div class="twelve column">
        	<table style="width:300px">
			    <tr>
			    	<td>Organization</td>
			    	<td style="width:40px;"></td>
			    	<td><input type="text" class="width280" value="" name="orgId" id="orgId" ></td>
			    </tr>
			    <tr>
			    	<td><button type="button" class="primary-btn" id="loadPrivBtn">Load Privilege</button></td>
			    	<td style="width:40px;"></td>
			    	<td><button type="button" class="primary-btn" id="createOrgBtn">Create Org</button></td>
			    	<td style="width:40px;"></td>
			    	<td><button type="button" class="primary-btn" id="updateBtn">Update</button></td>
			    </tr>
			</table>
      	</div>
    </div>
</div>

    
    
    <script type="text/javascript">
    	jQuery(function () {
    		jQuery('#pagetitle').html('Manage School');
    		
    		ClassEdgeFn.callAjax("/tce-auth-api/1/api/1/admin/organizations",null,
    				{	httpMethod:'GET',
    					targetFn : function(result){
    								var txresult = $.map(result, function(item) { return { id: item.orgId, text: item.name }; });
    								ClassEdgeFn.fillDD("#orgId",txresult,null);
    							}
    				});
    		
			jQuery('#loadPrivBtn').on("click",function(){
        		
        		ClassEdgeFn.callAjax("/tce-auth-api/1/api/1/admin/privilege",null,
            			{  httpMethod:'PUT',
            				targetFn : function (result) { alert(""+result); console.log( "My privilege = "+ result);}}
            	);
            });
            
    		jQuery('#createOrgBtn').on("click",function(){
				var settings = {
	                    width : 450, height : 350, title : "Create",
	                    template:'/adminedge/static/core/organization.html',
	                    apiProps : {httpMethod:'GET'}
	                };
	            ClassEdgeFn.showDialog("/tce-auth-api/1/api/1/tool/placeholder",null,settings);
	            
            });
    		
			jQuery('#updateBtn').on("click",function(){
					var seldata = $('#orgId').select2('data');
					var orgdata = {							
							"orgId": seldata.id,
							"orgName": seldata.text
						}
					alert("---"+JSON.stringify(orgdata));
					console.log("--",orgdata);
	        		ClassEdgeFn.callAjax("/tce-auth-api/1/api/1/admin/organization",JSON.stringify(orgdata),
	            				{  httpMethod:'PUT',
	        						targetFn : function (result) { alert(""+result); console.log( "My org = "+ result);} }
	            	);
	        });
        }); 
	</script>
